<!DOCTYPE html>

<html>

<head>
<style>
    body {
        /* set margin to 0 and overflow to hidden, to go fullscreen */
        margin: 0;
        overflow: hidden;
        background-color: #000000;
    }
</style>

<title>Physijs Constraints</title>

<script type="text/javascript" src="three.js"></script>
<script type="text/javascript" src="stats.js"></script>
<script type="text/javascript" src="physi.js"></script>
<script type="text/javascript" src="dat.gui.js"></script>
<script type="text/javascript" src="chroma.js"></script>
<script type="text/javascript" src="TrackballControls.js"></script>
<script type="text/javascript" src="perlin.js"></script>
<script type="text/javascript" src="OrbitControls.js"></script>
<script type="text/javascript" src="RollControls.js"></script>
<script type="text/javascript" charset="utf-8" src="OBJMTLLoader.js"></script>
<script type="text/javascript" charset="utf-8" src="MTLLoader.js"></script>


<script type="text/javascript">

'use strict';

Physijs.scripts.worker = 'physijs_worker.js';
Physijs.scripts.ammo = 'ammo.js';

var scale = chroma.scale(['white', 'blue', 'red', 'yellow','green']);
var windowHalfX = window.innerWidth / 2;
var windowHalfY = window.innerHeight / 2;

var initScene, render, applyForce, setMousePosition, mouse_position,
        ground_material, box_material,velocity ,wheelAngle , car, mouseX,mouseY,
        clock,orbitControls,delta,rollControls,cameraCount = 1,cameraHeight = 50,
        projector, renderer, render_stats, physics_stats, scene, ground, light, camera, box, boxes = [],vehicle_body, vehicle=[],input=[],currentId,uc = false,resetkey=false;

var obj_model = [];

initScene = function () {
    projector = new THREE.Projector;

    renderer = new THREE.WebGLRenderer({ antialias: true});
    renderer.setSize(window.innerWidth, window.innerHeight);

    renderer.setClearColorHex(0x000000);
    renderer.shadowMapEnabled = true;


    document.getElementById('viewport').appendChild(renderer.domElement);

    render_stats = new Stats();
    render_stats.domElement.style.position = 'absolute';
    render_stats.domElement.style.top = '1px';
    render_stats.domElement.style.left = '1px';
    render_stats.domElement.style.zIndex = 100;
    document.getElementById('viewport').appendChild(render_stats.domElement);


    scene = new Physijs.Scene({reportSize: 10, fixedTimeStep: 1 / 60});

    scene.setGravity(new THREE.Vector3(0, -80, 0));

    camera = new THREE.PerspectiveCamera(
            45,
            window.innerWidth / window.innerHeight,
            1,
            11000
    );
    //camera.position.set(190, 190, 190);
    //camera.lookAt(new THREE.Vector3(0, 0, 0));
    scene.add(camera);

    // Light
    light = new THREE.DirectionalLight(0xFFFFFF,1.3);
    var light1 = new THREE.AmbientLight(0xffffff);
    light.position.set(-1200, 3000, -1000);
    light.castShadow = true;
    light.shadowMapDebug = true;
    light.shadowCameraNear = 10;
    light.shadowCameraFar = 200;

    scene.add(light);
    //scene.add(light2);


    var meshes = [];


    createGround();
    createCube();
    
    car = createCar();
    createCar2();

    //camera.lookAt(new THREE.Vector3( car.position.x,car.position.y,car.position.z));
    createModel();
    velocity = -2;
    wheelAngle = 0.3;

/*    //控制鼠标视觉角度
    clock = new THREE.Clock();
    rollControls = new THREE.RollControls(camera);
    rollControls.movementSpeed = 0;
    rollControls.lookSpeed = 1;
*/
/*
   //orbitControls
    clock = new THREE.Clock();
    orbitControls = new THREE.OrbitControls(camera);
    orbitControls.autoRotate = false;
    //delta = clock.getDelta();
    //orbitControls.update(delta);
*/
    //var mouseX,mouseY;
    document.addEventListener( 'mousemove', onDocumentMouseMove, false );
    window.addEventListener( 'resize', onWindowResize, false );

    function onWindowResize() {

        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize( window.innerWidth, window.innerHeight );
    }
    
    function onDocumentMouseMove( event ) {

        mouseX = ( event.clientX - windowHalfX ) * 0.2;
        mouseY = -( event.clientY - windowHalfY ) * 0.2;

        //camera.position.x += ( mouseX - camera.position.x ) * .05;
        //camera.position.y += ( - mouseY - camera.position.y ) * .05;
        //camera.lookAt.x+= ( mouseX - camera.position.x ) * .05;
        //camera.lookAt.y += ( - mouseY - camera.position.y ) * .05;
        //requestAnimationFrame(render);
    }

     scene.addEventListener(
                'update',
                function() {

                    if ( input[currentId] && vehicle[currentId] ) {
                        if ( input[currentId].direction !== null ) {
                            input[currentId].steering += input[currentId].direction / 200;
                            if ( input[currentId].steering < -.6 ) input[currentId].steering = -.6;
                            if ( input[currentId].steering > .6 ) input[currentId].steering = .6;
                        }
                        vehicle[currentId].setSteering( input[currentId].steering, input[currentId].front );
                        vehicle[currentId].setSteering( input[currentId].steering, input[currentId].front+1 );

                        if ( input[currentId].power === true ) {
                            input[currentId].velocity += input[currentId].vsize;
                            if(input[currentId].velocity>input[currentId].vmax) input[currentId].velocity = input[currentId].vmax;
                            vehicle[currentId].applyEngineForce( input[currentId].fd*input[currentId].velocity );
                        } else if ( input[currentId].power === false ) {
                            if(input[currentId].velocity > 0){
                                // vehicle.setBrake( 20, 2 );
                                // vehicle.setBrake( 20, 3 ); 
                                vehicle[currentId].applyEngineForce( 0 ); 
                                input[currentId].velocity = 0;   
                                console.log("backward,"+input[currentId].velocity);                       
                            }else{
                                input[currentId].velocity -= input[currentId].vsize;
                                if(input[currentId].velocity<-input[currentId].vmax) input[currentId].velocity = -input[currentId].vmax;
                                vehicle[currentId].applyEngineForce( input[currentId].fd*input[currentId].velocity );                                
                            }

                        } else{
                            vehicle[currentId].applyEngineForce(0);
                            input[currentId].velocity = 0;
                        }

                        if(input[currentId].brake == true){
                            vehicle[currentId].setBrake( 100, 2 );
                            vehicle[currentId].setBrake( 100, 3 ); 
                            vehicle[currentId].applyEngineForce( 0 );
                            input[currentId].velocity = 0;
                        }
                        if(resetkey){
                            console.log('ori'+vehicle[currentId].mesh.position.x+','+vehicle[currentId].mesh.position.y);
                            vehicle[currentId].mesh.position.set(800,15,1050);
                            console.log(vehicle[currentId].mesh.position.x+','+vehicle[currentId].mesh.position.y);
                            resetkey = false;
                        }
                    }
                    //console.log('update');
                    scene.simulate( undefined, 2 );
                }
            );
    
    requestAnimationFrame(render);
    scene.simulate();

};

function optionCamera(){
    cameraCount++;
    var num = cameraCount % 4;
    switch(num){
        case 0: {cameraHeight = 50; break;}
        case 1: {cameraHeight = 100; break;}
        case 2: {cameraHeight = 200; break;}
        case 3: {cameraHeight = 10000; break;}
        defaulf: break;
    }
    console.log('optionCamera');

}

function setCurrentId(id){
    if(vehicle[id-1]){
        currentId = id-1;
        vehicle[(id)%2].applyEngineForce(0);
    }
}

function resetCar(){
    // console.log('reset car:'+(currentId+1));
    // if(vehicle[currentId]){
    //     vehicle[currentId].mesh.position.set(250,15,140);
    //     console.log('reset');
    // }
    resetkey = true;
}

function createCar() {
    var loader = new THREE.JSONLoader();
     loader.load( "car_1.js", function( car, car_materials ) {
                loader.load( "car_1_wheel.js", function( wheel, wheel_materials ) {
                    loader.load( "car_1_wheel_r2.js", function( wheel_r, wheel_r_materials ) {
                        currentId = 0;
                        var mesh = new Physijs.BoxMesh(
                            car,
                            new THREE.MeshFaceMaterial( car_materials ),
                            350
                        );
                        //mesh.position.y = 2;
                        //mesh.position.set(300,2,300);
                        //mesh.scale.set(5,5,5);
                        mesh.castShadow = mesh.receiveShadow = true;

                        var vehicle = new Physijs.Vehicle(mesh, new Physijs.VehicleTuning(
                            10.88,
                            1.83,
                            0.4,
                            500,
                            10.5,
                            8000
                        ));
                        vehicle.mesh.position.set(800,20,1100);
                        vehicle.mesh.rotation.y = -Math.PI/2;
     //                   vehicle.mesh.scale.set(2,2,2);
                        //test = new test;
                        scene.add( vehicle );

                        window.vehicle[currentId] = vehicle;
                        window.scene = scene;

                        var wheel_material = new THREE.MeshFaceMaterial( wheel_materials );
                        var wheel_r_material = new THREE.MeshFaceMaterial(wheel_r_materials);
                        //
                        // 0, bl,
                        // 1, br,
                        // 2, fl,
                        // 3, fr,
                        for ( var i = 0; i < 4; i++ ) {
                            vehicle.addWheel(
                                //wheel,
                                i % 2 === 0 ?wheel:wheel_r,
                                //wheel_material,
                                i % 2 === 0 ?wheel_material:wheel_r_material,
                                new THREE.Vector3(
                                        i % 2 === 0 ? -16 : 16,
                                        -12,
                                        i < 2 ? 28 : -28
                                ),
                                new THREE.Vector3( 0, -1, 0 ),
                                new THREE.Vector3( 
                                    //i%2 === 0?-1:1, 
                                    -1,
                                    0, 
                                    0 
                                ),
                                3,
                                6,
                                i < 2 ? false : true
                            );
                            // for(var v in vehicle.wheels)
                            // {
                            //     console.log(v);
                            // }
                            //ttt.scale.set(5,5,5);
                            //vehicle.addWheel.wheel.scale.set(5,5,5);
                        }
                        
                        input[0] = {
                            power: null,
                            velocity:0,
                            vsize:20,
                            vmax:200,
                            brake: null,
                            direction: null,
                            steering: 0,
                            front:2,
                            back:0,
                            fd:1,
                            pos:vehicle.mesh.position
                        };
                    });
                });

            });
    //return mesh;
       
}

function createCar2() {
    var loader = new THREE.JSONLoader();
     loader.load( "car_2.js", function( car, car_materials ) {
                loader.load( "car_2_wheel_l.js", function( wheel, wheel_materials ) {
                    loader.load( "car_2_wheel_r.js", function( wheel_r, wheel_r_materials ) {
                        currentId = 1;
                        var mesh = new Physijs.BoxMesh(
                            car,
                            new THREE.MeshFaceMaterial( car_materials ),
                            250
                        );
                        //mesh.position.y = 2;
                        //mesh.position.set(300,2,300);
                        //mesh.scale.set(5,5,5);
                        mesh.castShadow = mesh.receiveShadow = true;

                        var vehicle = new Physijs.Vehicle(mesh, new Physijs.VehicleTuning(
                            10.88,
                            1.83,
                            0.4,
                            500,
                            20.5,
                            10000
                        ));
                        vehicle.mesh.position.set(800,15,1000);
                        vehicle.mesh.rotation.y = Math.PI/2;
     //                   vehicle.mesh.scale.set(2,2,2);
                        scene.add( vehicle );

                        window.vehicle[currentId] = vehicle;
                        window.scene = scene;

                        var wheel_material = new THREE.MeshFaceMaterial( wheel_materials );
                        var wheel_r_material = new THREE.MeshFaceMaterial(wheel_r_materials);
                        //
                        // 0, bl,
                        // 1, br,
                        // 2, fl,
                        // 3, fr,
                        for ( var i = 0; i < 4; i++ ) {
                            vehicle.addWheel(
                                //wheel,
                                i % 2 === 0 ?wheel:wheel_r,
                                //wheel_material,
                                i % 2 === 0 ?wheel_material:wheel_r_material,
                                new THREE.Vector3(
                                        i % 2 === 0 ? -9 : 9,
                                        -4,
                                        i < 2 ? 16 : -16
                                ),
                                new THREE.Vector3( 0, -1, 0 ),
                                new THREE.Vector3( 
                                    //i%2 === 0?-1:1, 
                                    -1,
                                    0, 
                                    0 
                                ),
                                4,
                                8,
                                i < 2 ? false : true
                            );
                            // for(var v in vehicle.wheels)
                            // {
                            //     console.log(v);
                            // }
                            //ttt.scale.set(5,5,5);
                            //vehicle.addWheel.wheel.scale.set(5,5,5);
                        }

                        input[1] = {
                            power: null,
                            velocity:0,
                            vsize:20,
                            vmax:200,
                            brake: null,
                            direction: null,
                            steering: 0,
                            front:0,
                            back:2,
                            fd:-1 ,
                            pos:vehicle.mesh.position                 
                        };
                    });
                });

            });
       
}
document.addEventListener('keydown', function( ev ) {
    switch ( ev.keyCode ) {
        case 37: // left
        case 65: /*A*/
            input[currentId].direction = 1;
            break;

        case 38: // forward
        case 87: /*W*/
            input[currentId].power = false;
            break;

        case 39: // right
        case 68: /*D*/
             input[currentId].direction = -1;
            break;

        case 40: // back
        case 83: /*S*/
             input[currentId].power = true;
            break;
        case 32: /*space*/
            console.log('brake!brake!');
             input[currentId].brake = true;
            break;    
        case 49: // 1
            setCurrentId(1);
            break;
        case 50: // 2
            setCurrentId(2);
            break;
        case 82: // R
        case 114:
            resetCar();
            break;
        case 67:
        case 99:
            uc = true;
            optionCamera();
            break;  
    }
});
document.addEventListener('keyup', function( ev ) {
    switch ( ev.keyCode ) {
        case 37: // left
        case 65: /*A*/
             input[currentId].direction = null;
             vehicle[currentId].setSteering(0,input[currentId].front);
             vehicle[currentId].setSteering(0,input[currentId].front+1);
            break;

        case 38: // forward
        case 87: /*W*/
             input[currentId].power = null;
            break;

        case 39: // right
        case 68: /*D*/
             input[currentId].direction = null;
             vehicle[currentId].setSteering(0,input[currentId].front);
             vehicle[currentId].setSteering(0,input[currentId].front+1);             
            break;

        case 40: // back
        case 83: /*S*/
            input[currentId].power = null;
            break;
        case 32: /*space*/
             input[currentId].brake = false;
    }
});

function createGround() {
    var length = 2400;
    var width = 2400;
    // Materials
   var PlaneGeo = new THREE.PlaneGeometry(length, width, 1, 1);
    //var material_Plane= new THREE.MeshLambertMaterial({color: 0xFFFFFF});
    var maxAnisotropy = renderer.getMaxAnisotropy();

    var texture1 = THREE.ImageUtils.loadTexture( "ground_05.jpg" );
    var ground_material = Physijs.createMaterial(new THREE.MeshPhongMaterial( { color: 0xffffff, map: texture1 } ),0.9,0.3) ;
    texture1.anisotropy = maxAnisotropy;
    texture1.wrapS = texture1.wrapT = THREE.RepeatWrapping;
    texture1.repeat.set( 15, 15 );
    
    //ground01
    var ground01 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground01.rotation.x = -0.5 * Math.PI;
    ground01.position.set(1200,0,1200);
    ground01.receiveShadow = true;
    
    //ground02
    var ground02 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground02.rotation.x = -0.5 * Math.PI;
    ground02.position.set(3600,0,1200);
    ground02.receiveShadow = true;

    //ground03
    var ground03 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground03.rotation.x = -0.5 * Math.PI;
    ground03.position.set(1200,0,-1200);
    ground03.receiveShadow = true;

    //ground04
    var ground04 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground04.rotation.x = -0.5 * Math.PI;
    ground04.position.set(3600,0,-1200);
    ground04.receiveShadow = true;

    //ground05
    var ground05 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground05.rotation.x = -0.5 * Math.PI;
    ground05.position.set(1200,0,3600);
    ground05.receiveShadow = true;

    //ground06
    var ground06 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground06.rotation.x = -0.5 * Math.PI;
    ground06.position.set(3600,0,3600);
    ground06.receiveShadow = true;

    //ground07
    var ground07 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground07.rotation.x = -0.5 * Math.PI;
    ground07.position.set(-1200,0,1200);
    ground07.receiveShadow = true;

    //ground08
    var ground08 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground08.rotation.x = -0.5 * Math.PI;
    ground08.position.set(-1200,0,3600);
    ground08.receiveShadow = true;

    var ground09 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground09.rotation.x = -0.5 * Math.PI;
    ground09.position.set(-1200,0,-1200);
    ground09.receiveShadow = true;

    var ground10 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground10.rotation.x = -0.5 * Math.PI;
    ground10.position.set(6000,0,1200);
    ground10.receiveShadow = true;

    var ground11 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground11.rotation.x = -0.5 * Math.PI;
    ground11.position.set(6000,0,-1200);
    ground11.receiveShadow = true;

    var ground12 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground12.rotation.x = -0.5 * Math.PI;
    ground12.position.set(6000,0,3600);
    ground12.receiveShadow = true;

    var ground13 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground13.rotation.x = -0.5 * Math.PI;
    ground13.position.set(8400,0,1200);
    ground13.receiveShadow = true;

    var ground14 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground14.rotation.x = -0.5 * Math.PI;
    ground14.position.set(8400,0,-1200);
    ground14.receiveShadow = true;

    var ground15 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground15.rotation.x = -0.5 * Math.PI;
    ground15.position.set(8400,0,3600);
    ground15.receiveShadow = true;

    var ground16 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground16.rotation.x = -0.5 * Math.PI;
    ground16.position.set(10800,0,1200);
    ground16.receiveShadow = true;

    var ground17 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground17.rotation.x = -0.5 * Math.PI;
    ground17.position.set(10800,0,-1200);
    ground17.receiveShadow = true;

    var ground18 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground18.rotation.x = -0.5 * Math.PI;
    ground18.position.set(10800,0,3600);
    ground18.receiveShadow = true;

////////////////////////外围空白的////////////////////////////////////
    var ground19_1 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground19_1.rotation.x = -0.5 * Math.PI;
    ground19_1.position.set(1200,0,-3600);
    ground19_1.receiveShadow = true;

    var ground20_1 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground20_1.rotation.x = -0.5 * Math.PI;
    ground20_1.position.set(3600,0,-3600);
    ground20_1.receiveShadow = true;

    var ground21_1 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground21_1.rotation.x = -0.5 * Math.PI;
    ground21_1.position.set(-1200,0,-3600);
    ground21_1.receiveShadow = true;

    var ground22_1 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground22_1.rotation.x = -0.5 * Math.PI;
    ground22_1.position.set(6000,0,-3600);
    ground22_1.receiveShadow = true;

    var ground23_1 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground23_1.rotation.x = -0.5 * Math.PI;
    ground23_1.position.set(8400,0,-3600);
    ground23_1.receiveShadow = true;

    var ground24_1 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground24_1.rotation.x = -0.5 * Math.PI;
    ground24_1.position.set(10800,0,-3600);
    ground24_1.receiveShadow = true;

    var ground25_1 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground25_1.rotation.x = -0.5 * Math.PI;
    ground25_1.position.set(1200,0,6000);
    ground25_1.receiveShadow = true;

    var ground26_1 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground26_1.rotation.x = -0.5 * Math.PI;
    ground26_1.position.set(3600,0,6000);
    ground26_1.receiveShadow = true;

    var ground27_1 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground27_1.rotation.x = -0.5 * Math.PI;
    ground27_1.position.set(-1200,0,6000);
    ground27_1.receiveShadow = true;

    var ground28_1 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground28_1.rotation.x = -0.5 * Math.PI;
    ground28_1.position.set(6000,0,6000);
    ground28_1.receiveShadow = true;

    var ground29_1 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground29_1.rotation.x = -0.5 * Math.PI;
    ground29_1.position.set(8400,0,6000);
    ground29_1.receiveShadow = true;

    var ground30_1 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground30_1.rotation.x = -0.5 * Math.PI;
    ground30_1.position.set(10800,0,6000);
    ground30_1.receiveShadow = true;

//////////////////////////////////////////////////////////////////
    var ground19 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground19.rotation.x = -0.5 * Math.PI;
    ground19.position.set(1200,0,-6000);
    ground19.receiveShadow = true;

    var ground20 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground20.rotation.x = -0.5 * Math.PI;
    ground20.position.set(3600,0,-6000);
    ground20.receiveShadow = true;

    var ground21 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground21.rotation.x = -0.5 * Math.PI;
    ground21.position.set(-1200,0,-6000);
    ground21.receiveShadow = true;

    var ground22 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground22.rotation.x = -0.5 * Math.PI;
    ground22.position.set(6000,0,-6000);
    ground22.receiveShadow = true;

    var ground23 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground23.rotation.x = -0.5 * Math.PI;
    ground23.position.set(8400,0,-6000);
    ground23.receiveShadow = true;

    var ground24 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground24.rotation.x = -0.5 * Math.PI;
    ground24.position.set(10800,0,-6000);
    ground24.receiveShadow = true;

    var ground25 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground25.rotation.x = -0.5 * Math.PI;
    ground25.position.set(1200,0,8400);
    ground25.receiveShadow = true;

    var ground26 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground26.rotation.x = -0.5 * Math.PI;
    ground26.position.set(3600,0,8400);
    ground26.receiveShadow = true;

    var ground27 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground27.rotation.x = -0.5 * Math.PI;
    ground27.position.set(-1200,0,8400);
    ground27.receiveShadow = true;

    var ground28 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground28.rotation.x = -0.5 * Math.PI;
    ground28.position.set(6000,0,8400);
    ground28.receiveShadow = true;

    var ground29 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground29.rotation.x = -0.5 * Math.PI;
    ground29.position.set(8400,0,8400);
    ground29.receiveShadow = true;

    var ground30 = new Physijs.BoxMesh(PlaneGeo, ground_material,0); 
        ground30.rotation.x = -0.5 * Math.PI;
    ground30.position.set(10800,0,8400);
    ground30.receiveShadow = true;
    
/*    scene.add(ground01);
    scene.add(ground02);
    scene.add(ground03);
    scene.add(ground04);
    scene.add(ground05);
    scene.add(ground06);
    scene.add(ground07);
    scene.add(ground08);
    scene.add(ground09);
    scene.add(ground10);
    scene.add(ground11);
    scene.add(ground12);
    scene.add(ground13);
    scene.add(ground14);
    scene.add(ground15);
    scene.add(ground16);
    scene.add(ground17);
    scene.add(ground18);
    scene.add(ground19);
    scene.add(ground20);
    scene.add(ground21);
    scene.add(ground22);
    scene.add(ground23);
    scene.add(ground24);
    scene.add(ground25);
    scene.add(ground26);
    scene.add(ground27);
    scene.add(ground28);
    scene.add(ground29);
    scene.add(ground30);*/
    ///////////////外围空白的/////////////
   /* scene.add(ground19_1);
    scene.add(ground20_1);
    scene.add(ground21_1);
    scene.add(ground22_1);
    scene.add(ground23_1);
    scene.add(ground24_1);
    scene.add(ground25_1);
    scene.add(ground26_1);
    scene.add(ground27_1);
    scene.add(ground28_1);
    scene.add(ground29_1);
    scene.add(ground30_1);*/

////////////////////////////////////////整个地图///////////////////////////////
    var lengthAll = 21600;
    var widthAll = 16800;
    // Materials
   var PlaneGeoAll = new THREE.PlaneGeometry(lengthAll, widthAll, 1, 1);
    //var material_Plane= new THREE.MeshLambertMaterial({color: 0xFFFFFF});
    var maxAnisotropyAll = renderer.getMaxAnisotropy();

    var textureAll = THREE.ImageUtils.loadTexture( "ground_05.jpg" );
    var ground_materialAll = Physijs.createMaterial(new THREE.MeshPhongMaterial( { color: 0xffffff, map: textureAll } ),0.9,0.3) ;
    textureAll.anisotropy = maxAnisotropyAll;
    textureAll.wrapS = textureAll.wrapT = THREE.RepeatWrapping;
    textureAll.repeat.set( 198,154  );
    
    //groundAll
    var groundAll = new Physijs.BoxMesh(PlaneGeoAll, ground_materialAll,0); 
        groundAll.rotation.x = -0.5 * Math.PI;
    groundAll.position.set(3600,0,1200);
    groundAll.receiveShadow = true;
    scene.add(groundAll);
}

function createCube(){
    //var cubeSize = Math.ceil((Math.random() * 10));
    //var geometry = new THREE.CubeGeometry( cubeSize, cubeSize, cubeSize );
    var geometry = new THREE.CubeGeometry( 6, 6, 6 );
    //var material_cube = Physijs.createMaterial(new THREE.MeshLambertMaterial( { color: scale(Math.random()).hex(),} ),0.3,0);
    var cube = [];
    var i =0;
    for (; i <= 24; i++) {
        cube[i] = getCube(i);
        scene.add(cube[i]);
    };
    function getCube(){
        var material_cube = Physijs.createMaterial(new THREE.MeshLambertMaterial( { color: scale(Math.random()).hex(),} ),0.3,0);
        cube[i] = new Physijs.BoxMesh(geometry, material_cube);
        //cube[i].rotation.set(0,0,0); 
        var vz = i % 5;
        var vy = i / 5;
        cube[i].position.set(850,4+6*vy,300+6*vz);   
        cube[i].__dirtyRotation = true;
        return cube[i];
    };
}

//障碍物
function createBlock(a,b,c){
    var geometry = new THREE.CubeGeometry( a, b, c );
    var block = new Physijs.BoxMesh(geometry,new THREE.MeshLambertMaterial({color:0xffffff}),9500);
    return block;
}

function createclinder_block(a,b,c){
    var geometry=new THREE.CylinderGeometry(a,b,c);
    var block=new Physijs.BoxMesh(geometry,new THREE.MeshLambertMaterial({color:0xffffff}),9500);
    return block;
}



function createModel(){
    ////////////////////////////////////////ground01//////////////////////////////////////////

    //房子9_3
    var loader_house9_3 = new THREE.JSONLoader(true);
    var house9_3;
    loader_house9_3.load("house9_3.js", function ( geometry,materials ) {
        //var loading = document.getElementById("Loading");
        //loading.parentNode.removeChild(loading);
        
        //var material_car1 = Physijs.createMaterial(new THREE.MeshLambertMaterial({color: 0xFF0000}),0.8,0.3); 
        //var   mesh = new THREE.SkinnedMesh(geometry, mat);
        //obj1 = new Physijs.BoxMesh(geometry, material_car1,500);

        house9_3 = new Physijs.BoxMesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        //var house1_2 = new Physijs.BoxMesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        house9_3.position.set(1900,320,1450);
        house9_3.rotation.y = 0.45 * Math.PI;
        house9_3.scale.set(700,700,700);
        //scene.add(house9_3);
        scene.add(house9_3);

    });

     //喷泉fountain01
    var loader_fountain01 = new THREE.JSONLoader(true);
    var fountain01;
    loader_fountain01.load("fountain01.js", function ( geometry,materials) {
        fountain01 = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
        fountain01.position.set(1200,0,1400);
        //fountain01.rotation.y =  -0.5 * Math.PI;
        fountain01.scale.set(0.02,0.02,0.02);
        scene.add(fountain01);
        


        var block = createclinder_block(150,240,40);
        block.position.set(1200,100,1400);
        block.visible = false;
        scene.add(block);
    });


    //汽车module_car4，很好，可用来控制
    var loader_module_car4 = new THREE.JSONLoader(true);
    var module_car4;
    var module_car4_2;//ground07中的一辆车
    loader_module_car4.load("module_car4.js", function ( geometry,materials) {
        module_car4 = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
        module_car4.position.set(1200,0,1000);
        module_car4.rotation.y = - 0.5 * Math.PI;
        module_car4.scale.set(0.1,0.1,0.1);
        scene.add(module_car4);

        var block=createBlock(140,10,40);
        block.position.set(1200,100,1000);
        block.visible=false;
        scene.add(block);


        module_car4_2 = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
        module_car4_2.position.set(-1350,0,900);
        module_car4_2.rotation.y = 0.5 * Math.PI;
        module_car4_2.scale.set(0.1,0.1,0.1);
        scene.add(module_car4_2);
        
        var block_2=createBlock(100,100,80);
        block_2.position.set(-1350,100,900);
        block_2.visible=false;
        scene.add(block_2);
    });

    ///////////////////////////////ground02//////////////////////////////////////////////////

    //小草tree4_5
    var loader_tree4_5 = new THREE.JSONLoader(true);
    var tree4_5,tree4_5_2;//两棵小草
    var tree4_5_3,tree4_5_4;//两棵小草，是ground04的
    loader_tree4_5.load("tree4_5.js", function ( geometry) {
        tree4_5 = new Physijs.BoxMesh(geometry, new THREE.MeshLambertMaterial({color: 0x003300}) ,9500);
        tree4_5.position.set(4500,60,1150);
        tree4_5.scale.set(1,1,1);
        scene.add(tree4_5);
        scene.add(tree4_5);

        //第二颗小草
        tree4_5_2 = new Physijs.BoxMesh(geometry, new THREE.MeshLambertMaterial({color: 0x003300}) ,9500);
        tree4_5_2.position.set(4500,60,650);
        tree4_5_2.scale.set(1,1,1);
        scene.add(tree4_5_2);
        scene.add(tree4_5_2);

        //第三颗小草
        tree4_5_3 = new Physijs.BoxMesh(geometry, new THREE.MeshLambertMaterial({color: 0x003300}) ,9500);
        tree4_5_3.position.set(2950,40,-1900);
        tree4_5_3.scale.set(1,1,1);
        scene.add(tree4_5_3);
        scene.add(tree4_5_3);

        //第四颗小草
        tree4_5_4 = new Physijs.BoxMesh(geometry, new THREE.MeshLambertMaterial({color: 0x003300}) ,9500);
        tree4_5_4.position.set(3150,420,-1900);
        tree4_5_4.scale.set(1,1,1);
        scene.add(tree4_5_4);
        scene.add(tree4_5_4);
    });

    //房子house18，大办公楼
    var loader_house18 = new THREE.JSONLoader(true);
    var house18;
    loader_house18.load("house18.js", function ( geometry,materials) {
        house18 = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
        house18.position.set(4700,0,100);
        house18.rotation.y =  -0.5 * Math.PI;
        house18.scale.set(3,3,3);
        scene.add(house18);
        
    var block=createBlock(637,100,1400);
        block.position.set(4990,300,900);
        block.visible=false;
        scene.add(block);
    });


    ///////////////////////////////ground03//////////////////////////////////////////////////
   //树林tree01
    var loader3 = new THREE.JSONLoader(true);
    var obj3;
    loader3.load("tree01.js", function ( geometry ,materials) {

       var tree_1 = new Array();
       for(var i = 0;i<3;i++){
            tree_1[i] = new Array();
       };
       
        for (var i = 0; i < 3; i++) {
            for (var j = 0; j < 5; j++){
                // tree_1[i][j] = new Physijs.BoxMesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
                 tree_1[i][j] = new Physijs.BoxMesh(geometry, new THREE.MeshLambertMaterial({color:0x002200}),9500);
                //tree_2[i][j] = tree_1[i][j];
                tree_1[i][j].position.set(1200+75*j,20,-2000-75*i);
                tree_1[i][j].scale.set(0.15,0.15,0.15);
                scene.add(tree_1[i][j]);
                scene.add(tree_1[i][j]);
            };

        };
    });

    //路灯streetlight1
    var loader_streetlight1 = new THREE.JSONLoader(true);
    var streetlight1,streetlight1_2;//两只路灯
    var streetlight1_3,streetlight1_4;//ground08中的两只路灯
    loader_streetlight1.load("streetlight1.js", function ( geometry,materials) {
        streetlight1 = new Physijs.BoxMesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        streetlight1.position.set(1100,20,-900);
        //people01.rotation.y =  -0.5 * Math.PI;
        streetlight1.scale.set(0.2,0.2,0.2);
        scene.add(streetlight1);
        scene.add(streetlight1);

         streetlight1_2 = new Physijs.BoxMesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        streetlight1_2.position.set(1250,20,-900);
        //people01_2.rotation.y =  -0.5 * Math.PI;
        streetlight1_2.scale.set(0.3,0.3,0.3);
        scene.add(streetlight1_2);
        scene.add(streetlight1_2);

        streetlight1_3 = new Physijs.BoxMesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        streetlight1_3.position.set(-1250,20,1150);
        //people01_3.rotation.y =  -0.5 * Math.PI;
        streetlight1_3.scale.set(0.3,0.3,0.3);
        scene.add(streetlight1_3);
        scene.add(streetlight1_3);

        streetlight1_4 = new Physijs.BoxMesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        streetlight1_4.position.set(-1250,20,1350);
        //people01_4.rotation.y =  -0.5 * Math.PI;
        streetlight1_4.scale.set(0.3,0.3,0.3);
        scene.add(streetlight1_4);
        scene.add(streetlight1_4);
    });

    //房子house15
    var loader_house15 = new THREE.JSONLoader(true);
    var house15;
    loader_house15.load("house15.js", function ( geometry,materials) {
        house15 = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
        house15.position.set(1200,0,-1200);
        house15.rotation.y =  Math.PI;
        house15.scale.set(0.4,0.4,0.4);
        scene.add(house15);
        

        var block=createBlock(420,100,400);
        block.position.set(1210,300,-1200);
        block.visible=false;
        scene.add(block);
    });



    ///////////////////////////////ground04/////////////////////////////
    //房子house23
    var loader_house23 = new THREE.JSONLoader(true);
    var house23;
    loader_house23.load("house23.js", function ( geometry,materials) {
        house23 = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
        house23.position.set(3100,0,-2200);
        house23.rotation.y =  -0.5 * Math.PI;
        house23.scale.set(0.9,0.9,0.9);
        scene.add(house23);
        

        var block=createBlock(380,200,310);
        block.position.set(3180,400,-2200);
        block.visible=false;
        scene.add(block);
    });

    //有两棵小草，在ground02中设置


    ///////////////////////////////ground05/////////////////////////
    //房子house20,很好
    var loader_house20 = new THREE.JSONLoader(true);
    var house20;
    loader_house20.load("house20.js", function ( geometry,materials) {
        house20 = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
        house20.position.set(1000,0,4200);
        house20.rotation.y =  -0.5 * Math.PI;
        house20.scale.set(0.3,0.3,0.3);
        scene.add(house20);
        
        var block=createBlock(390,200,360);
        block.position.set(1000,400,4400);
        block.visible=false;
        scene.add(block);
    });


//////////////////////////////////////////ground06/////////////////////////////////
    //房子house21,很好
    var loader_house21 = new THREE.JSONLoader(true);
    var house21;
    loader_house21.load("house21.js", function ( geometry,materials) {
        house21 = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
        house21.position.set(3600,0,4000);
        house21.rotation.y =  -0.5 * Math.PI;
        house21.scale.set(0.25,0.25,0.25);
        scene.add(house21);
        
        var block=createBlock(390,200,460);
        block.position.set(3600,100,3990);
        block.visible=false;
        scene.add(block);
    });

    ///////////////////////////////////ground07//////////////////////////

    //房子house24
    var loader_house24 = new THREE.JSONLoader(true);
    var house24;
    loader_house24.load("house24.js", function ( geometry,materials) {
        house24 = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
        house24.position.set(-1500,0,1300);
        house24.rotation.y =  Math.PI;
        house24.scale.set(0.3,0.3,0.3);
        scene.add(house24);

        var block=createBlock(352,200,470);
        block.position.set(-1500,100,1285);
        block.visible=false;
        scene.add(block);
    });
    //两只路灯，在ground03中设置
    //一辆汽车，在ground01中设置


    //////////////////////////////////ground08///////////////////////
    //house10，单一颜色
    var loader_house10 = new THREE.JSONLoader(true);
    var house10;
    loader_house10.load("house10.js", function ( geometry,materials) {
        house10 = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
        house10.position.set(-1000,0,4500);
        house10.rotation.y =  -0.5 * Math.PI;
        house10.scale.set(0.3,0.3,0.3);
        scene.add(house10);
        

        var block=createBlock(360,200,470);
        block.position.set(-1000,100,4500);
        block.visible=false;
        scene.add(block);
    });


    //////////////////////////////////ground09///////////////////////
    //房子house12_1，单一颜色
    var loader_house12_1 = new THREE.JSONLoader(true);
    var house12_1;
    loader_house12_1.load("house12_1.js", function ( geometry,materials) {
        house12_1 = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
        house12_1.position.set(-1000,0,-2000);
        //house12_1.rotation.y =  -0.5 * Math.PI;
        house12_1.scale.set(0.2,0.2,0.2);
        scene.add(house12_1);
        

        var block=createBlock(330,200,390);
        block.position.set(-995,100,-2000);
        block.visible=false;
        scene.add(block);
    });

    //////////////////////////////////ground10///////////////////////
        //房子house31,很好
    var loader_house31 = new THREE.JSONLoader(true);
    var house31;
    loader_house31.load("house31.js", function ( geometry,materials) {
        house31 = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
        house31.position.set(7600,0,2400);
        house31.rotation.y =  -0.5 * Math.PI;
        house31.scale.set(0.09,0.09,0.09);
        scene.add(house31);
        

        var block=createBlock(780,100,1720);
        block.position.set(7600,100,2400);
        block.visible=false;
        scene.add(block);
    });

    /////////////////////////////////////////ground11////////////////////////////
     //房子house25
    var loader_house25 = new THREE.JSONLoader(true);
    var house25;
    loader_house25.load("house25.js", function ( geometry,materials) {
        house25 = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
        house25.position.set(6500,0,-3000);
        house25.rotation.y =  -0.5 * Math.PI;
        house25.scale.set(0.6,0.15,0.6);
        scene.add(house25);

        var block=createBlock(610,50,890);
        block.position.set(6550,100,-3000);
        block.visible=false;
        scene.add(block);
    });


    //////////////////////////////////ground12///////////////////////
    //不加内容
  


    //////////////////////////////////////////ground13//////////////////////////////
    //和ground16，ground31合并
    //房子house32,很好
    var loader_house32 = new THREE.JSONLoader(true);
    var house32;
    loader_house32.load("house32.js", function ( geometry,materials) {
        house32 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        house32.position.set(13000,0,1400);
        house32.rotation.y =  -0.5 * Math.PI;
        house32.scale.set(3,2,3);
        scene.add(house32);
        //scene.add(house32);
    });


    //////////////////////////////////////ground16//////////////////////////////
    //和ground13合并


    ////////////////////////////////////ground14//////////////////////////////////
    //房子house30，很好
    var loader_house30 = new THREE.JSONLoader(true);
    var house30;
    loader_house30.load("house30.js", function ( geometry,materials) {
        house30 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        house30.position.set(10400,0,-1600);
        house30.rotation.y =  -0.5 * Math.PI;
        house30.scale.set(0.2,0.2,0.2);
        scene.add(house30);
        
        var block=createBlock(780,100,750);
        block.position.set(10400,100,-1600);
        block.visible=false;
        scene.add(block);
    });

    /////////////////////////////////////ground15/////////////////////////////////////
    //房子house34，很好
    var loader_house34 = new THREE.JSONLoader(true);
    var house34;
    loader_house34.load("house34.js", function ( geometry,materials) {
        house34 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        house34.position.set(10300,0,4800);
        house34.rotation.y =   Math.PI;
        house34.scale.set(0.02,0.02,0.02);
        scene.add(house34);
        //scene.add(house34);
    });

    /////////////////////////////////////ground17////////////////////////////////////
    //和ground14合并

    /////////////////////////////////////ground18////////////////////////////////////
    //和ground15合并


    ////////////////////////////////////ground19 ////////////////////////////////////////
    //汽车module_car7_1,可用来控制
    var loader_module_car7_1 = new THREE.JSONLoader(true);
    var module_car7_1,module_car7_1_2,module_car7_1_3,module_car7_1_4,module_car7_1_5,module_car7_1_6;//六辆一样的车
    loader_module_car7_1.load("module_car7_1.js", function ( geometry,materials) {
        //第一辆
        module_car7_1 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car7_1.position.set(1200,0,-5400);
        module_car7_1.rotation.y = - 0.5 * Math.PI;
        module_car7_1.scale.set(0.2,0.2,0.2);
        scene.add(module_car7_1);

        //第二辆
        module_car7_1_2 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car7_1_2.position.set(1600,0,-5400);
        module_car7_1_2.rotation.y = - 0.5 * Math.PI;
        module_car7_1_2.scale.set(0.2,0.2,0.2);
        scene.add(module_car7_1_2);

        //第三辆
        module_car7_1_3 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car7_1_3.position.set(1800,0,-5400);
        module_car7_1_3.rotation.y = - 0.5 * Math.PI;
        module_car7_1_3.scale.set(0.2,0.2,0.2);
        scene.add(module_car7_1_3);

        //第四辆
        module_car7_1_4 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car7_1_4.position.set(2000,0,-5400);
        module_car7_1_4.rotation.y = - 0.5 * Math.PI;
        module_car7_1_4.scale.set(0.2,0.2,0.2);
        scene.add(module_car7_1_4);

        //第五辆
        module_car7_1_5 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car7_1_5.position.set(1000,0,-5400);
        module_car7_1_5.rotation.y = - 0.5 * Math.PI;
        module_car7_1_5.scale.set(0.2,0.2,0.2);
        scene.add(module_car7_1_5);

        //第六辆
        module_car7_1_6 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car7_1_6.position.set(800,0,-5400);
        module_car7_1_6.rotation.y = - 0.5 * Math.PI;
        module_car7_1_6.scale.set(0.2,0.2,0.2);
        scene.add(module_car7_1_6);
        
    });

    //汽车module_car11_1,大卡车
    var loader_module_car11_1 = new THREE.JSONLoader(true);
    var module_car11_1,module_car11_1_3,module_car11_1_4,module_car11_1_2,module_car11_1_5,module_car11_1_6,module_car11_1_7,module_car11_1_8;//八辆大卡车
    loader_module_car11_1.load("module_car11_1.js", function ( geometry,materials) {
        //第一辆
        module_car11_1 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car11_1.position.set(1100,0,-5700);
        module_car11_1.rotation.y = 0.5 * Math.PI;
        module_car11_1.scale.set(0.3,0.3,0.3);
        scene.add(module_car11_1);

        //第二辆
        module_car11_1_2 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car11_1_2.position.set(1300,0,-5700);
        module_car11_1_2.rotation.y = 0.5 * Math.PI;
        module_car11_1_2.scale.set(0.3,0.3,0.3);
        scene.add(module_car11_1_2);

        //第三辆
        module_car11_1_3 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car11_1_3.position.set(1500,0,-5700);
        module_car11_1_3.rotation.y = 0.5 * Math.PI;
        module_car11_1_3.scale.set(0.3,0.3,0.3);
        scene.add(module_car11_1_3);

        //第四辆
        module_car11_1_4 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car11_1_4.position.set(1700,0,-5700);
        module_car11_1_4.rotation.y = 0.5 * Math.PI;
        module_car11_1_4.scale.set(0.3,0.3,0.3);
        scene.add(module_car11_1_4);

        //第五辆
        module_car11_1_5 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car11_1_5.position.set(1900,0,-5700);
        module_car11_1_5.rotation.y = 0.5 * Math.PI;
        module_car11_1_5.scale.set(0.3,0.3,0.3);
        scene.add(module_car11_1_5);

        //第六辆
        module_car11_1_6 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car11_1_6.position.set(2100,0,-5700);
        module_car11_1_6.rotation.y = 0.5 * Math.PI;
        module_car11_1_6.scale.set(0.3,0.3,0.3);
        scene.add(module_car11_1_6);

        //第七辆
        module_car11_1_7 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car11_1_7.position.set(900,0,-5700);
        module_car11_1_7.rotation.y = 0.5 * Math.PI;
        module_car11_1_7.scale.set(0.3,0.3,0.3);
        scene.add(module_car11_1_7);

        //第八辆
        module_car11_1_8 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car11_1_8.position.set(700,0,-5700);
        module_car11_1_8.rotation.y = 0.5 * Math.PI;
        module_car11_1_8.scale.set(0.3,0.3,0.3);
        scene.add(module_car11_1_8); 
    });

    ///////////////////////////////////////ground20////////////////////////////////////////////
    //汽车module_car15，跑车
    var loader_module_car15 = new THREE.JSONLoader(true);
    var module_car15,module_car15_6,module_car15_2,module_car15_3,module_car15_4,module_car15_5;//六辆跑车
    loader_module_car15.load("module_car15.js", function ( geometry,materials) {
        //第一辆
        module_car15 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car15.position.set(3600,0,-5400);
        module_car15.scale.set(1.5,1.5,1.5);
        scene.add(module_car15);

        //第二辆
        module_car15_2 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car15_2.position.set(4200,0,-5400);
        module_car15_2.scale.set(1.5,1.5,1.5);
        scene.add(module_car15_2);

        //第三辆
        module_car15_3 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car15_3.position.set(4000,0,-5400);
        module_car15_3.scale.set(1.5,1.5,1.5);
        scene.add(module_car15_3);

        //第四辆
        module_car15_4 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car15_4.position.set(4400,0,-5400);
        module_car15_4.scale.set(1.5,1.5,1.5);
        scene.add(module_car15_4);

        //第五辆
        module_car15_5 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car15_5.position.set(3400,0,-5400);
        module_car15_5.scale.set(1.5,1.5,1.5);
        scene.add(module_car15_5);

        //第六辆
        module_car15_6 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car15_6.position.set(3200,0,-5400);
        module_car15_6.scale.set(1.5,1.5,1.5);
        scene.add(module_car15_6);
    });

    //汽车module_car12，大面包车
    var loader_module_car12 = new THREE.JSONLoader(true);
    var module_car12,module_car12_2,module_car12_3,module_car12_4,module_car12_5,module_car12_6,module_car12_7,module_car12_8;//八辆大面包车
    loader_module_car12.load("module_car12.js", function ( geometry,materials) {
        //第一辆
        module_car12 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car12.position.set(3700,0,-5700);
        module_car12.scale.set(1,1,1);
        scene.add(module_car12);

        //第二辆
        module_car12_2 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car12_2.position.set(3900,0,-5700);
        module_car12_2.scale.set(1,1,1);
        scene.add(module_car12_2);

        //第三辆
        module_car12_3 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car12_3.position.set(4100,0,-5700);
        module_car12_3.scale.set(1,1,1);
        scene.add(module_car12_3);

        //第四辆
        module_car12_4 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car12_4.position.set(4300,0,-5700);
        module_car12_4.scale.set(1,1,1);
        scene.add(module_car12_4);

        //第五辆
        module_car12_5 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car12_5.position.set(4500,0,-5700);
        module_car12_5.scale.set(1,1,1);
        scene.add(module_car12_5);

        //第六辆
        module_car12_6 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car12_6.position.set(3500,0,-5700);
        module_car12_6.scale.set(1,1,1);
        scene.add(module_car12_6);

        //第七辆
        module_car12_7 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car12_7.position.set(3300,0,-5700);
        module_car12_7.scale.set(1,1,1);
        scene.add(module_car12_7);

        //第八辆
        module_car12_8 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car12_8.position.set(3100,0,-5700);
        module_car12_8.scale.set(1,1,1);
        scene.add(module_car12_8);
    });

    /////////////////////////////////////////////ground21/////////////////////////////////////
    //汽车module_car13，公交车
    var loader_module_car13 = new THREE.JSONLoader(true);
    var module_car13,module_car13_6,module_car13_2,module_car13_3,module_car13_4,module_car13_5//六辆公交车;
    loader_module_car13.load("module_car13.js", function ( geometry,materials) {
        //第一辆车
        module_car13 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car13.position.set(-1250,0,-5400);
        //module_car13.rotation.y = - 0.5 * Math.PI;
        module_car13.scale.set(1,1,1);
        scene.add(module_car13);

        //第二辆车
        module_car13_2 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car13_2.position.set(-1550,0,-5400);
        //module_car13_2.rotation.y = - 0.5 * Math.PI;
        module_car13_2.scale.set(1,1,1);
        scene.add(module_car13_2);

        //第三辆车
        module_car13_3 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car13_3.position.set(-1850,0,1-5400);
        //module_car13_3.rotation.y = - 0.5 * Math.PI;
        module_car13_3.scale.set(1,1,1);
        scene.add(module_car13_3);

        //第四辆车
        module_car13_4 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car13_4.position.set(-950,0,-5400);
        //module_car13_4.rotation.y = - 0.5 * Math.PI;
        module_car13_4.scale.set(1,1,1);
        scene.add(module_car13_4);

        //第五辆车
        module_car13_5 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car13_5.position.set(-650,0,-5400);
        //module_car13_5.rotation.y = - 0.5 * Math.PI;
        module_car13_5.scale.set(1,1,1);
        scene.add(module_car13_5);

        //第六辆车
        module_car13_6 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car13_6.position.set(-350,0,-5400);
        //module_car13_6.rotation.y = - 0.5 * Math.PI;
        module_car13_6.scale.set(1,1,1);
        scene.add(module_car13_6);

    });

    //汽车module_car14_1，吊车
    var loader_module_car14_1 = new THREE.JSONLoader(true);
    var module_car14_1,module_car14_1_2,module_car14_1_3,module_car14_1_4,module_car14_1_5,module_car14_1_6,module_car14_1_7,module_car14_1_8;//；七辆吊车
    loader_module_car14_1.load("module_car14_1.js", function ( geometry,materials) {
        //第一辆
        module_car14_1 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car14_1.position.set(-1100,0,-5800);
        //module_car14_1.rotation.y = - 0.5 * Math.PI;
        module_car14_1.scale.set(0.02,0.02,0.02);
        scene.add(module_car14_1);

        //第二辆
        module_car14_1_2 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car14_1_2.position.set(-1400,0,-5800);
        //module_car14_1_2.rotation.y = - 0.5 * Math.PI;
        module_car14_1_2.scale.set(0.02,0.02,0.02);
        scene.add(module_car14_1_2);

        //第三辆
        module_car14_1_3 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car14_1_3.position.set(-1700,0,-5800);
        //module_car14_1.rotation.y = - 0.5 * Math.PI;
        module_car14_1_3.scale.set(0.02,0.02,0.02);
        scene.add(module_car14_1_3);

        //第四辆
        module_car14_1_4 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car14_1_4.position.set(-2000,0,-5800);
        //module_car14_1_4.rotation.y = - 0.5 * Math.PI;
        module_car14_1_4.scale.set(0.02,0.02,0.02);
        scene.add(module_car14_1_4);

        //第五辆
        module_car14_1_5 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car14_1_5.position.set(-800,0,-5800);
        //module_car14_1_5.rotation.y = - 0.5 * Math.PI;
        module_car14_1_5.scale.set(0.02,0.02,0.02);
        scene.add(module_car14_1_5);

        //第六辆
        module_car14_1_6 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car14_1_6.position.set(-500,0,-5800);
        //module_car14_1_6.rotation.y = - 0.5 * Math.PI;
        module_car14_1_6.scale.set(0.02,0.02,0.02);
        scene.add(module_car14_1_6);

        //第七辆
        module_car14_1_7 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car14_1_7.position.set(-200,0,-5800);
        //module_car14_1_7.rotation.y = - 0.5 * Math.PI;
        module_car14_1_7.scale.set(0.02,0.02,0.02);
        scene.add(module_car14_1_7);
        
    });

    //////////////////////////////////////////////ground22///////////////////////////////////////
    //空白

    //////////////////////////////////////////////ground23//////////////////////////////////////
    //汽车module_car17，越野摩托车
    var loader_module_car17 = new THREE.JSONLoader(true);
    var module_car17,module_car17_2,module_car17_3,module_car17_4,module_car17_5;//五辆越野车
    loader_module_car17.load("module_car17.js", function ( geometry,materials) {
        //第一辆
        module_car17 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car17.position.set(9500,0,-5000);
        module_car17.rotation.y =  Math.PI;
        module_car17.scale.set(0.6,0.6,0.6);
        scene.add(module_car17);

        //第二辆
        module_car17_2 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car17_2.position.set(9200,0,-5000);
        module_car17_2.rotation.y =  Math.PI;
        module_car17_2.scale.set(0.6,0.6,0.6);
        scene.add(module_car17_2);

        //第三辆
        module_car17_3 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car17_3.position.set(8900,0,-5000);
        module_car17_3.rotation.y =  Math.PI;
        module_car17_3.scale.set(0.6,0.6,0.6);
        scene.add(module_car17_3);

        //第四辆
        module_car17_4 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car17_4.position.set(8600,0,-5000);
        module_car17_4.rotation.y =  Math.PI;
        module_car17_4.scale.set(0.6,0.6,0.6);
        scene.add(module_car17_4);

        //第五辆
        module_car17_5 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car17_5.position.set(8300,0,-5000);
        module_car17_5.rotation.y =  Math.PI;
        module_car17_5.scale.set(0.6,0.6,0.6);
        scene.add(module_car17_5);
    
    });

    //汽车module_car16，跑车
    var loader_module_car16 = new THREE.JSONLoader(true);
    var module_car16,module_car16_2,module_car16_3,module_car16_4,module_car16_5;//五辆跑车
    loader_module_car16.load("module_car16.js", function ( geometry,materials) {
        //第一辆
        module_car16 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car16.position.set(9500,0,-5300);
        module_car16.scale.set(6,6,6);
        scene.add(module_car16);

        //第二辆
        module_car16_2 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car16_2.position.set(9200,0,-5300);
        module_car16_2.scale.set(6,6,6);
        scene.add(module_car16_2);

        //第三辆
        module_car16_3 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car16_3.position.set(8900,0,-5300);
        module_car16_3.scale.set(6,6,6);
        scene.add(module_car16_3);

        //第四辆
        module_car16_4 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car16_4.position.set(8600,0,-5300);
        module_car16_4.scale.set(6,6,6);
        scene.add(module_car16_4);

        //第五辆
        module_car16_5 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car16_5.position.set(8300,0,-5300);
        module_car16_5.scale.set(6,6,6);
        scene.add(module_car16_5);
    });


    //汽车module_car20，跑车
    var loader_module_car20 = new THREE.JSONLoader(true);
    var module_car20,module_car20_2,module_car20_3,module_car20_4,module_car20_5;//五辆跑车
    loader_module_car20.load("module_car20.js", function ( geometry,materials) {
        //第一辆
        module_car20 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car20.position.set(9500,0,-5700);
        module_car20.scale.set(0.6,0.6,0.6);
        scene.add(module_car20);

        //第二辆
        module_car20_2 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car20_2.position.set(9200,0,-5700);
        module_car20_2.scale.set(0.6,0.6,0.6);
        scene.add(module_car20_2);

        //第三辆
        module_car20_3 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car20_3.position.set(8900,0,-5700);
        module_car20_3.scale.set(0.6,0.6,0.6);
        scene.add(module_car20_3);

        //第四辆
        module_car20_4 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car20_4.position.set(8600,0,-5700);
        module_car20_4.scale.set(0.6,0.6,0.6);
        scene.add(module_car20_4);

        //第五辆
        module_car20_5 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        module_car20_5.position.set(8300,0,-5700);
        module_car20_5.scale.set(0.6,0.6,0.6);
        scene.add(module_car20_5);    
    });

    ////////////////////////////////////////ground25/////////////////////////////////
    //飞机,airplane01，单一颜色
    var loader_airplane01 = new THREE.JSONLoader(true);
    var airplane01,airplane01_2,airplane01_3,airplane01_4;//四架飞机
    loader_airplane01.load("airplane01.js", function ( geometry,materials) {
        //第一架
        airplane01 = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
        airplane01.position.set(1000,0,8200);
        airplane01.rotation.y =  Math.PI;
        airplane01.scale.set(3.9,3.9,3.9);
        scene.add(airplane01);
        
        //第二架
        airplane01_2 = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({color:0x999999}));
        airplane01_2.position.set(1500,0,8200);
        airplane01_2.rotation.y =  Math.PI;
        airplane01_2.scale.set(3.9,3.9,3.9);
        scene.add(airplane01_2);

        //第三架
        airplane01_3 = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({color:0x00aaaa}));
        airplane01_3.position.set(2000,0,8200);
        airplane01_3.rotation.y =  Math.PI;
        airplane01_3.scale.set(3.9,3.9,3.9);
        scene.add(airplane01_3);
        
        //第四架
        airplane01_4 = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({color:0x000099}));
        airplane01_4.position.set(500,0,8200);
        airplane01_4.rotation.y =  Math.PI;
        airplane01_4.scale.set(3.9,3.9,3.9);
        scene.add(airplane01_4);
    });

    /////////////////////////////////////////////ground26////////////////////////////////////////
    //飞机,airplane02
    var loader_airplane02 = new THREE.JSONLoader(true);
    var airplane02,airplane02_2,airplane02_3,airplane02_4;//四架飞机
    loader_airplane02.load("airplane02.js", function ( geometry,materials) {
        //第一架
        airplane02 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        airplane02.position.set(3000,0,8200);
        airplane02.rotation.y = - 0.5 * Math.PI;
        airplane02.scale.set(0.08,0.08,0.08);
        scene.add(airplane02);

        //第二架
        airplane02_2 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        airplane02_2.position.set(3500,0,8200);
        airplane02_2.rotation.y = - 0.5 * Math.PI;
        airplane02_2.scale.set(0.08,0.08,0.08);
        scene.add(airplane02_2);

        //第三架
        airplane02_3 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        airplane02_3.position.set(4000,0,8200);
        airplane02_3.rotation.y = - 0.5 * Math.PI;
        airplane02_3.scale.set(0.08,0.08,0.08);
        scene.add(airplane02_3);

        //第四架
        airplane02_4 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        airplane02_4.position.set(4500,0,8200);
        airplane02_4.rotation.y = - 0.5 * Math.PI;
        airplane02_4.scale.set(0.08,0.08,0.08);
        scene.add(airplane02_4);
    });

    /////////////////////////////////////////ground27////////////////////////////////////
    //飞机,airplane03
    var loader_airplane03 = new THREE.JSONLoader(true);
    var airplane03,airplane03_2,airplane03_3,airplane03_4;//四架飞机
    loader_airplane03.load("airplane03.js", function ( geometry,materials) {
        //第一架
        airplane03 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        airplane03.position.set(-500,0,8200);
        airplane03.rotation.y = - 0.5 * Math.PI;
        airplane03.scale.set(1,1,1);
        scene.add(airplane03);
        
        //第二架
        airplane03_2 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        airplane03_2.position.set(-1000,0,8200);
        airplane03_2.rotation.y = - 0.5 * Math.PI;
        airplane03_2.scale.set(1,1,1);
        scene.add(airplane03_2);

        //第三架
        airplane03_3 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        airplane03_3.position.set(-1500,0,8200);
        airplane03_3.rotation.y = - 0.5 * Math.PI;
        airplane03_3.scale.set(1,1,1);
        scene.add(airplane03_3);

        //第四架
        airplane03_4 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        airplane03_4.position.set(-2000,0,8200);
        airplane03_4.rotation.y = - 0.5 * Math.PI;
        airplane03_4.scale.set(1,1,1);
        scene.add(airplane03_4);
    });

    
    /////////////////////////////////////////ground28/////////////////////////////////
    //飞机,airplane06_1,单一颜色
    var loader_airplane06_1 = new THREE.JSONLoader(true);
    var airplane06_1,airplane06_1_2,airplane06_1_3,airplane06_1_4;//四架飞机
    loader_airplane06_1.load("airplane06_1.js", function ( geometry,materials) {
        //第一架
        airplane06_1 = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));
        airplane06_1.position.set(5500,0,8200);
        airplane06_1.rotation.y =  Math.PI;
        airplane06_1.scale.set(0.32,0.32,0.32);
        scene.add(airplane06_1);

        //第二架
        airplane06_1_2 = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({color:0xeeeeee}));
        airplane06_1_2.position.set(6000,0,8200);
        airplane06_1_2.rotation.y =  Math.PI;
        airplane06_1_2.scale.set(0.32,0.32,0.32);
        scene.add(airplane06_1_2);

        //第三架
        airplane06_1_3 = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({color:0x20aaa5}));
        airplane06_1_3.position.set(6500,0,8200);
        airplane06_1_3.rotation.y =  Math.PI;
        airplane06_1_3.scale.set(0.32,0.32,0.32);
        scene.add(airplane06_1_3);

        //第四架
        airplane06_1_4 = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({color:0xaaaa00}));
        airplane06_1_4.position.set(7000,0,8200);
        airplane06_1_4.rotation.y =  Math.PI;
        airplane06_1_4.scale.set(0.32,0.32,0.32);
        scene.add(airplane06_1_4);
    });


    ////////////////////////////////////ground29///////////////////////////////////
    //飞机,airplane05
    var loader_airplane05 = new THREE.JSONLoader(true);
    var airplane05,airplane05_2,airplane05_3,airplane05_4;//四架飞机
    loader_airplane05.load("airplane05.js", function ( geometry,materials) {
        //第一架
        airplane05 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        airplane05.position.set(8000,0,7900);
        airplane05.rotation.y =  Math.PI;
        airplane05.scale.set(6,6,6);
        scene.add(airplane05);
        
        //第二架
        airplane05_2 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        airplane05_2.position.set(8500,0,7900);
        airplane05_2.rotation.y =  Math.PI;
        airplane05_2.scale.set(6,6,6);
        scene.add(airplane05_2);

        //第三架
        airplane05_3 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        airplane05_3.position.set(9000,0,7900);
        airplane05_3.rotation.y =  Math.PI;
        airplane05_3.scale.set(6,6,6);
        scene.add(airplane05_3);

        //第四架
        airplane05_4 = new Physijs.Mesh(geometry, new THREE.MeshFaceMaterial(materials),9500);
        airplane05_4.position.set(9500,0,7900);
        airplane05_4.rotation.y =  Math.PI;
        airplane05_4.scale.set(6,6,6);
        scene.add(airplane05_4);
    });

    /////////////////////////////////////////ground31///////////////////////////////////////////
    //和ground16，ground16合并


    /////////////////////////////////////////ground32 and ground33//////////////////////////////////////////
    
}

var num = 0;
render = function () {
    //控制camera跟踪车走
    if(vehicle[currentId]){
        //console.log('xxx: '+vehicle[currentId].mesh.position.x+','+vehicle[currentId].mesh.position.y);
        camera.position.set(vehicle[currentId].mesh.position.x -30-mouseX,vehicle[currentId].mesh.position.y+cameraHeight-mouseY,vehicle[currentId].mesh.position.z-30);
        //camera.position.set(car.position.x -130-mouseX,car.position.y+900-mouseY,car.position.z-130);
        //camera.position.set(car.position.x +20,car.position.y+50,car.position.z+20);
        camera.lookAt(new THREE.Vector3( vehicle[currentId].mesh.position.x,vehicle[currentId].mesh.position.y,vehicle[currentId].mesh.position.z));
    }

   /* //控制鼠标视觉角度
    delta = clock.getDelta();
    rollControls.update(delta);
    //orbitControls.update(delta);*/
/*
    if(camera.position.x <= -60 && num == 0){
        createModel();
        num++;
    }
    */

    requestAnimationFrame(render);
    renderer.render(scene, camera);
    render_stats.update();
    scene.simulate(undefined, 2);
};


window.onload = initScene;

</script>
</head>

<body>
<div id="viewport"></div>
</body>

</html>
